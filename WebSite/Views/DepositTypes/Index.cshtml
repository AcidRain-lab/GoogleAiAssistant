@model List<WebObjectsBLL.DTO.DepositTypeDTO>

@{
    ViewData["Title"] = "Депозити";
}

<h2>@ViewData["Title"]</h2>
<a asp-action="Add" class="btn btn-sm btn-success">Додати депозит</a>

@foreach (var depositType in Model)
{
    <h3>@depositType.DepositName</h3>
    <p>@depositType.Description</p>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Срок (місяців)</th>
                @foreach (var currency in depositType.DepositTerms.Select(t => t.Currency).Distinct())
                {
                    <th>@currency</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var term in depositType.DepositTerms.Select(t => t.TermMonths).Distinct().OrderBy(t => t))
            {
                <tr>
                    <td>@term</td>
                    @foreach (var currency in depositType.DepositTerms.Select(t => t.Currency).Distinct())
                    {
                        var rate = depositType.DepositTerms
                        .FirstOrDefault(t => t.TermMonths == term && t.Currency == currency)?.InterestRate ?? 0;
                        <td>@rate %</td>
                    }
                </tr>
            }
        </tbody>
    </table>

    <a asp-action="Edit" asp-route-id="@depositType.Id" class="btn btn-sm btn-warning">Редагувати</a>
    <form asp-action="Delete" asp-route-id="@depositType.Id" method="post" style="display: inline;">
        <button type="submit" class="btn btn-sm btn-danger">Видалити</button>
    </form>
}